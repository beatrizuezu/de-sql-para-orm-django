#importando as funcao avg, max e min do django
from django.db.models import Avg, Max, Min

from core.produtos.models import Produto

#agrega os produtos obtendo o valor maximo, minimo e o medio de um produto
Produto.objects.aggregate(
    valor_maximo=Max('valor'),
    valor_minimo=Min('valor'),
    valor_medio=Avg('valor')
)

orm = Produto.objects.aggregate(
    valor_maximo=Max('valor'),
    valor_minimo=Min('valor'),
    valor_medio=Avg('valor')
)

print(orm.query)

#importando o connections para ver a query sql
from django.db import connection

connection.queries

"""
Se precisar limpar a lista de query do connection:
from django.db import reset_queries
reset_queries()

"""
